# 埋め込み生成コスト見積もり

## AWS Bedrock Titan Embed Text v1 の料金

### 料金体系（2024年時点）

**Amazon Titan Embed Text v1** の料金は以下の通りです：

- **リクエストあたり**: $0.0001 USD（約0.015円）
- **または**: 1,000トークンあたり $0.0001 USD

### 10,000単語の埋め込み生成コスト

#### 前提条件
- 10,000単語を処理
- 各単語に対して1リクエスト（現在の実装）
- 各単語の平均トークン数: 約10-20トークン（日本語+英語の組み合わせを想定）

#### コスト計算

**方法1: リクエストベース（現在の実装）**
```
10,000リクエスト × $0.0001 = $1.00 USD
約150円（1USD = 150円として）
```

**方法2: トークンベース**
```
10,000単語 × 15トークン（平均） = 150,000トークン
150,000トークン ÷ 1,000 × $0.0001 = $0.015 USD
約2.25円
```

### 実際のコスト

現在の実装では、**リクエストベース**で課金される可能性が高いため：

**10,000単語の埋め込み生成**: **約$1.00 USD（約150円）**

### コスト最適化の方法

1. **バッチ処理の実装**（現在は未実装）
   - Bedrock TitanはバッチAPIをサポートしていないため、効果は限定的

2. **既存埋め込みのスキップ**（現在実装済み）
   - 既に埋め込みがあるアイテムはスキップされるため、再実行時のコストは削減

3. **段階的な生成**
   - 一度に全件処理せず、段階的に処理することで、コストを分散

### 注意事項

- **実際の料金はAWS公式ページで確認してください**
- 料金はリージョンや時期によって変動する可能性があります
- 最新の料金情報: https://aws.amazon.com/bedrock/pricing/

### 参考: 他の埋め込みサービスの料金比較

- **OpenAI text-embedding-3-small**: $0.02 per 1M tokens（約$0.003 for 10,000 words）
- **AWS Bedrock Titan**: $0.0001 per request（約$1.00 for 10,000 words）
- **Cohere Embed**: $0.10 per 1M tokens（約$0.015 for 10,000 words）

### 推奨事項

10,000単語の埋め込み生成は、**約$1.00（約150円）**程度のコストが発生します。

これは非常に低コストですが、大量のデータを処理する場合は：
1. まず小規模（100-1000単語）でテスト
2. 結果を確認してから全件処理
3. 既存の埋め込みを活用して再生成を最小化

